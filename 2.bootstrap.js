(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1:function(t,e,n){"use strict";n.r(e);var r=n(5),i=n(31);class o{constructor(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}render(t){const e=window.devicePixelRatio||1,n=this.canvas.getBoundingClientRect();this.canvas.width=n.width*e,this.canvas.height=n.height*e,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath();const r=t.width(),i=t.height(),o=this.canvas.width/r,s=this.canvas.height/i,c=o>s?s:o,a=new Map,d=new Map;for(let e=0;e<r;e++)for(let n=0;n<i;n++){const r=t.at(e,n),i=r.kind;let o=a.get(i);if(void 0===o&&(o=r.color_code(),void 0!==o&&a.set(i,o)),this.ctx.fillStyle=o,this.ctx.fillRect(e*c,n*c,c,c),!d.has(i)){const t=r.legend();d.set(i,{text:t,color:o})}}return this.ctx.stroke(),{legends:d}}}var s=n(33);class c{constructor(t){this.canvas=t}render(t){const e=window.devicePixelRatio||1,n=this.canvas.getBoundingClientRect();this.canvas.width=n.width*e,this.canvas.height=n.height*e;const i=t.width(),o=t.height(),c=this.determineCellSize(i,o),a=new s.Point(this.canvas.width/2,c+198),d=new s.PixelView(this.canvas,a),h=new Map,u=new Map,l=new Map;let f=null;function w(t,e,n){const r=function(t,e){const n=u.get(t);if(void 0!==n)return n;let r=e.rgb_color();void 0===r&&(r=16777215);const i=(new s.CubeColor).getByHorizontalColor(r);return u.set(t,i),l.set(t,{text:e.legend(),color:e.color_code()}),i}(t,n),i=c+2*e,o=new s.CubeDimension(c,c,i);return new s.Cube(o,r,!1)}function g(t){const e=t.kind,n=t.altitude;if(l.has(e)||l.set(e,{text:t.legend(),color:t.color_code()}),e===r.b.Top)return null===f&&(f=w(e,n,t)),f;if(e===r.b.Town||e===r.b.Path)return w(e,n,t);const i=h.get(n);if(void 0!==i)return i;const o=w(e,n,t);return h.set(n,o),o}for(let e=0;e<i;e++)for(let n=0;n<o;n++){const r=g(t.at(e,n)),i=new s.Point3D(e*c,n*c,0);d.renderObject(r,i)}return{legends:l}}determineCellSize(t,e){const n=e+t,r=(this.canvas.height-200)/n*2,i=this.canvas.width/n*2/Math.sqrt(3);let o=Math.floor(r>i?i:r);return o%2==1&&o--,o>6?o:6}}(new class{constructor(){this.generator=r.a.new(),this.currentBoard=null,this.screen=null;const t=document.getElementById("dimension-selector"),e=t[t.selectedIndex];this.dim=e.value,t.addEventListener("change",this.onVisualizationChange.bind(this)),this.widthInput=document.getElementById("width-input"),this.heightInput=document.getElementById("height-input"),this.screenRoot=document.getElementById("screen-root"),this.initRenderer(),this.paintButton=document.getElementById("paint-button"),this.paintButton.addEventListener("click",()=>{this.render()}),this.legends=document.getElementById("legends"),this.downloadJSONButton=document.getElementById("download-json-button"),this.downloadJSONButton.addEventListener("click",this.onDownloadJSON.bind(this)),this.downloadPNGButton=document.getElementById("download-png-button"),this.downloadPNGButton.addEventListener("click",this.onDownloadPNG.bind(this))}render(){this.paintButton.textContent="Painting...";for(const t of[this.paintButton,this.downloadJSONButton,this.downloadPNGButton])t.classList.add("disabled");window.setTimeout(()=>{const t=Date.now(),[e,n]=this.getSize(),r=this.generator.gen_auto(e,n),i=this.renderer.render(r);this.legends.innerHTML="";const o=Array.from(i.legends.keys());o.sort();for(const t of o){const e=i.legends.get(t),n=document.createElement("div");n.className="legend";const r=document.createElement("div");r.className="legend-color",r.style.backgroundColor=e.color||"none",n.appendChild(r);const o=document.createElement("div");o.className="legend-name",o.textContent=e.text,n.appendChild(o),this.legends.appendChild(n)}this.currentBoard=r;for(const t of[this.paintButton,this.downloadJSONButton,this.downloadPNGButton])t.classList.remove("disabled");this.paintButton.textContent="Generate",console.log("Consumed:",Date.now()-t)},0)}getSize(){const t=parseInt(this.widthInput.value,10),e=parseInt(this.heightInput.value,10);if(!isNaN(t)&&!isNaN(e))return[t,e];if("3d"===this.dim)return[120,120];const n=this.screenRoot.getBoundingClientRect();if(isNaN(t)){if(isNaN(e)){const t=(n.height>n.width?n.height:n.width)/200;return[Math.floor(n.width/t),Math.floor(n.height/t)]}{const t=n.height/e;return[Math.floor(n.width/t),e]}}{const e=n.width/t;return[t,Math.floor(n.height/e)]}}initRenderer(){const t=this.screenRoot.firstChild;switch(null!==t&&this.screenRoot.removeChild(t),this.currentBoard=null,this.screen=document.createElement("canvas"),this.screen.className="screen",this.screenRoot.appendChild(this.screen),this.dim){case"2d":this.renderer=new o(this.screen);break;case"3d":this.renderer=new c(this.screen);break;default:throw new Error("Unknown context "+this.dim)}}onDownloadJSON(t){if(null===this.currentBoard)return;const e=new Blob([this.currentBoard.as_json()],{type:"text/plain;charset=utf-8"});Object(i.saveAs)(e,"board.json")}onDownloadPNG(t){null!==this.screen&&this.screen.toBlob(t=>Object(i.saveAs)(t,"board.png"))}onVisualizationChange(t){const e=t.target,n=e[e.selectedIndex].value;this.dim!==n&&(this.dim=n,this.initRenderer(),this.render())}}).render()},47:function(t,e,n){"use strict";var r=n.w[t.i];t.exports=r;n(5);r.u()},48:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=48},5:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return _})),n.d(e,"m",(function(){return b})),n.d(e,"f",(function(){return y})),n.d(e,"h",(function(){return B})),n.d(e,"g",(function(){return x})),n.d(e,"c",(function(){return N})),n.d(e,"l",(function(){return C})),n.d(e,"j",(function(){return E})),n.d(e,"d",(function(){return k})),n.d(e,"k",(function(){return I})),n.d(e,"e",(function(){return M})),n.d(e,"i",(function(){return O})),n.d(e,"n",(function(){return P}));var r=n(47);const i=new Array(32).fill(void 0);function o(t){return i[t]}i.push(void 0,null,!0,!1);let s=i.length;function c(t){const e=o(t);return function(t){t<36||(i[t]=s,s=t)}(t),e}let a,d,h=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});function u(){return 0===a.byteLength&&(a=new Uint8Array(r.t.buffer)),a}function l(t,e){return h.decode(u().subarray(t,t+e))}function f(){return 0===d.byteLength&&(d=new Int32Array(r.t.buffer)),d}function w(t){s===i.length&&i.push(i.length+1);const e=s;return s=i[e],i[e]=t,e}function g(t,e){return u().subarray(t/1,t/1+e)}h.decode();Object.freeze({Low:0,0:"Low",Middle:1,1:"Middle",High:2,2:"High"});const p=Object.freeze({Sea:0,0:"Sea",Mountain:1,1:"Mountain",Forest:2,2:"Forest",Plain:3,3:"Plain",Town:4,4:"Town",Top:5,5:"Top",Highland:6,6:"Highland",DeepSea:7,7:"DeepSea",Path:8,8:"Path"});class v{static __wrap(t){const e=Object.create(v.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.a(t)}width(){return r.m(this.ptr)>>>0}height(){return r.l(this.ptr)>>>0}at(t,e){const n=r.k(this.ptr,t,e);return m.__wrap(n)}as_json(){try{const n=r.h(-16);r.j(n,this.ptr);var t=f()[n/4+0],e=f()[n/4+1];let i;return 0!==t&&(i=l(t,e).slice(),r.i(t,1*e)),i}finally{r.h(16)}}}class m{static __wrap(t){const e=Object.create(m.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.b(t)}get kind(){return r.e(this.ptr)>>>0}set kind(t){r.g(this.ptr,t)}get altitude(){return r.d(this.ptr)}set altitude(t){r.f(this.ptr,t)}color_code(){try{const n=r.h(-16);r.n(n,this.ptr);var t=f()[n/4+0],e=f()[n/4+1];let i;return 0!==t&&(i=l(t,e).slice(),r.i(t,1*e)),i}finally{r.h(16)}}rgb_color(){try{const n=r.h(-16);r.p(n,this.ptr);var t=f()[n/4+0],e=f()[n/4+1];return 0===t?void 0:e>>>0}finally{r.h(16)}}legend(){try{const n=r.h(-16);r.o(n,this.ptr);var t=f()[n/4+0],e=f()[n/4+1];return l(t,e)}finally{r.h(16),r.i(t,e)}}}class _{static __wrap(t){const e=Object.create(_.prototype);return e.ptr=t,e}__destroy_into_raw(){const t=this.ptr;return this.ptr=0,t}free(){const t=this.__destroy_into_raw();r.c(t)}static new(){const t=r.s();return _.__wrap(t)}gen_auto(t,e){const n=r.r(this.ptr,t,e);return v.__wrap(n)}gen(t,e,n){const i=r.q(this.ptr,t,e,n);return v.__wrap(i)}}function b(t){c(t)}function y(t,e,n){o(t).getRandomValues(g(e,n))}function B(t,e,n){o(t).randomFillSync(g(e,n))}function x(t,e){return w(new Function(l(t,e)))}function N(t,e){return w(o(t).call(o(e)))}function C(t,e){return o(t)===o(e)}function E(t){return w(o(t).self)}function k(t){return w(o(t).crypto)}function I(t){return void 0===o(t)}function M(t){return w(o(t).getRandomValues)}function O(t,e){return w(n(48)(l(t,e)))}function P(t,e){throw new Error(l(t,e))}d=new Int32Array(r.t.buffer),a=new Uint8Array(r.t.buffer)}).call(this,n(46)(t))}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi8yZC50cyIsIndlYnBhY2s6Ly8vLi8zZC50cyIsIndlYnBhY2s6Ly8vLi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi4vcGtnIHN5bmMiLCJ3ZWJwYWNrOi8vLy4uL3BrZy9tYXBnZW5fYmcuanMiXSwibmFtZXMiOlsiUmVuZGVyZXIyRCIsImNhbnZhcyIsInRoaXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiYm9hcmQiLCJkcHIiLCJ3aW5kb3ciLCJkZXZpY2VQaXhlbFJhdGlvIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiaGVpZ2h0IiwiY2xlYXJSZWN0IiwiYmVnaW5QYXRoIiwiY2VsbFdpZHRoIiwiY2VsbEhlaWdodCIsImNlbGxTaXplIiwiY29sb3JzIiwiTWFwIiwibGVnZW5kcyIsIngiLCJ5IiwiY2VsbCIsImF0Iiwia2luZCIsImNvbG9yIiwiZ2V0IiwidW5kZWZpbmVkIiwiY29sb3JfY29kZSIsInNldCIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiaGFzIiwidGV4dCIsImxlZ2VuZCIsInN0cm9rZSIsImRldGVybWluZUNlbGxTaXplIiwicG9pbnQiLCJwaXhlbFZpZXciLCJjYWNoZSIsInRvcEN1YmUiLCJjYWxjQ3ViZSIsImFsdCIsImNhY2hlZCIsInJnYiIsInJnYl9jb2xvciIsImdldEJ5SG9yaXpvbnRhbENvbG9yIiwia2luZENvbG9yIiwieiIsImRpbSIsImN1YmVBdCIsImFsdGl0dWRlIiwiVG9wIiwiVG93biIsIlBhdGgiLCJjdWJlIiwicHQiLCJyZW5kZXJPYmplY3QiLCJib3RoIiwiZnJvbUhlaWdodCIsImZyb21XaWR0aCIsIk1hdGgiLCJzcXJ0IiwiZmxvb3IiLCJnZW5lcmF0b3IiLCJuZXciLCJjdXJyZW50Qm9hcmQiLCJzY3JlZW4iLCJzZWxlY3RvciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvcHRpb24iLCJzZWxlY3RlZEluZGV4IiwidmFsdWUiLCJhZGRFdmVudExpc3RlbmVyIiwib25WaXN1YWxpemF0aW9uQ2hhbmdlIiwiYmluZCIsIndpZHRoSW5wdXQiLCJoZWlnaHRJbnB1dCIsInNjcmVlblJvb3QiLCJpbml0UmVuZGVyZXIiLCJwYWludEJ1dHRvbiIsInJlbmRlciIsImRvd25sb2FkSlNPTkJ1dHRvbiIsIm9uRG93bmxvYWRKU09OIiwiZG93bmxvYWRQTkdCdXR0b24iLCJvbkRvd25sb2FkUE5HIiwidGV4dENvbnRlbnQiLCJidG4iLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRUaW1lb3V0Iiwic3RhcnQiLCJEYXRlIiwibm93IiwiZ2V0U2l6ZSIsImdlbl9hdXRvIiwicmVuZGVyZWQiLCJyZW5kZXJlciIsImlubmVySFRNTCIsIm5hbWVzIiwiQXJyYXkiLCJmcm9tIiwia2V5cyIsInNvcnQiLCJuYW1lIiwiaXRlbSIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJzdHlsZSIsImJhY2tncm91bmRDb2xvciIsImFwcGVuZENoaWxkIiwibGFiZWwiLCJyZW1vdmUiLCJjb25zb2xlIiwibG9nIiwicGFyc2VJbnQiLCJpc05hTiIsImNlbGxQaXgiLCJwcmV2IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiRXJyb3IiLCJfIiwiYmxvYiIsIkJsb2IiLCJhc19qc29uIiwidHlwZSIsInRvQmxvYiIsImIiLCJldmVudCIsInRhcmdldCIsIndlYnBhY2tFbXB0eUNvbnRleHQiLCJyZXEiLCJlIiwiY29kZSIsInJlc29sdmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiaWQiLCJoZWFwIiwiZmlsbCIsImdldE9iamVjdCIsImlkeCIsInB1c2giLCJoZWFwX25leHQiLCJsZW5ndGgiLCJ0YWtlT2JqZWN0IiwicmV0IiwiZHJvcE9iamVjdCIsImNhY2hlZFVpbnQ4TWVtb3J5MCIsImNhY2hlZEludDMyTWVtb3J5MCIsImNhY2hlZFRleHREZWNvZGVyIiwiVGV4dERlY29kZXIiLCJyZXF1aXJlIiwiaWdub3JlQk9NIiwiZmF0YWwiLCJnZXRVaW50OE1lbW9yeTAiLCJieXRlTGVuZ3RoIiwiVWludDhBcnJheSIsImJ1ZmZlciIsImdldFN0cmluZ0Zyb21XYXNtMCIsInB0ciIsImxlbiIsImRlY29kZSIsInN1YmFycmF5IiwiZ2V0SW50MzJNZW1vcnkwIiwiSW50MzJBcnJheSIsImFkZEhlYXBPYmplY3QiLCJvYmoiLCJnZXRBcnJheVU4RnJvbVdhc20wIiwiT2JqZWN0IiwiZnJlZXplIiwiTG93IiwiTWlkZGxlIiwiSGlnaCIsIkxhbmRLaW5kIiwiU2VhIiwiTW91bnRhaW4iLCJGb3Jlc3QiLCJQbGFpbiIsIkhpZ2hsYW5kIiwiRGVlcFNlYSIsIkJvYXJkIiwiY3JlYXRlIiwicHJvdG90eXBlIiwiX19kZXN0cm95X2ludG9fcmF3IiwiQ2VsbCIsIl9fd3JhcCIsInJldHB0ciIsInIwIiwicjEiLCJ2MCIsInNsaWNlIiwiYXJnMCIsIkdlbmVyYXRvciIsInJlcyIsIl9fd2JpbmRnZW5fb2JqZWN0X2Ryb3BfcmVmIiwiX193YmdfZ2V0UmFuZG9tVmFsdWVzXzFlZjExZTg4OGU1MjI4ZTkiLCJhcmcxIiwiYXJnMiIsImdldFJhbmRvbVZhbHVlcyIsIl9fd2JnX3JhbmRvbUZpbGxTeW5jXzFiNTJjODQ4MjM3NGM1NWIiLCJyYW5kb21GaWxsU3luYyIsIl9fd2JnX25ld18zYTc0NmYyNjE5NzA1YWRkIiwiRnVuY3Rpb24iLCJfX3diZ19jYWxsX2Y1NGQzYTZkYWRiMTk5Y2EiLCJjYWxsIiwiX193YmluZGdlbl9qc3ZhbF9lcSIsIl9fd2JnX3NlbGZfYWMzNzllNzgwYTBkOGI5NCIsInNlbGYiLCJfX3diZ19jcnlwdG9fMWU0MzAyYjg1ZDRmNjRhMiIsImNyeXB0byIsIl9fd2JpbmRnZW5faXNfdW5kZWZpbmVkIiwiX193YmdfZ2V0UmFuZG9tVmFsdWVzXzFiNGJhMTQ0MTYyYTVjOWUiLCJfX3diZ19yZXF1aXJlXzY0NjFiMWU5YTBkN2MzNGEiLCJfX3diaW5kZ2VuX3Rocm93Il0sIm1hcHBpbmdzIjoia0hBR2UsTUFBTUEsRUFJbkIsWUFBWUMsR0FDVkMsS0FBS0QsT0FBU0EsRUFD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RUFBbUJpQyxFQUFNSyxLQUkvQyxTQUFTTyxFQUE0QlosRUFBTUssR0FFOUMsT0FBTy9CLEVBREsxQixFQUFVb0QsR0FBTWEsS0FBS2pFLEVBQVV5RCxLQUl4QyxTQUFTUyxFQUFvQmQsRUFBTUssR0FFdEMsT0FEWXpELEVBQVVvRCxLQUFVcEQsRUFBVXlELEdBSXZDLFNBQVNVLEVBQTRCZixHQUV4QyxPQUFPMUIsRUFESzFCLEVBQVVvRCxHQUFNZ0IsTUFJekIsU0FBU0MsRUFBOEJqQixHQUUxQyxPQUFPMUIsRUFESzFCLEVBQVVvRCxHQUFNa0IsUUFJekIsU0FBU0MsRUFBd0JuQixHQUVwQyxZQURnQ3ZLLElBQXBCbUgsRUFBVW9ELEdBSW5CLFNBQVNvQixFQUF1Q3BCLEdBRW5ELE9BQU8xQixFQURLMUIsRUFBVW9ELEdBQU1PLGlCQUl6QixTQUFTYyxFQUErQnJCLEVBQU1LLEdBRWpELE9BQU8vQixFQURLLE1BQVFQLEVBQW1CaUMsRUFBTUssS0FJMUMsU0FBU2lCLEVBQWlCdEIsRUFBTUssR0FDbkMsTUFBTSxJQUFJN0UsTUFBTXVDLEVBQW1CaUMsRUFBTUssSUFHN0NoRCxFQUFxQixJQUFJZ0IsV0FBVyxJQUFZUCxRQUNoRFYsRUFBcUIsSUFBSVMsV0FBVyxJQUFZQyxVIiwiZmlsZSI6IjIuYm9vdHN0cmFwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQm9hcmQgfSBmcm9tIFwibWFwZ2VuXCI7XG5pbXBvcnQgeyBSZW5kZXJlciwgUmVuZGVyZWQsIExlZ2VuZCB9IGZyb20gXCIuL3JlbmRlcmVyXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbmRlcmVyMkQgaW1wbGVtZW50cyBSZW5kZXJlciB7XG4gIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgcHJpdmF0ZSBjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcblxuICBjb25zdHJ1Y3RvcihjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikhO1xuICB9XG5cbiAgcHVibGljIHJlbmRlcihib2FyZDogQm9hcmQpOiBSZW5kZXJlZCB7XG4gICAgY29uc3QgZHByID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgICBjb25zdCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdGhpcy5jYW52YXMud2lkdGggPSByZWN0LndpZHRoICogZHByO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogZHByO1xuXG4gICAgLy8gQ2xlYXIgYXQgZmlyc3RcbiAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XG5cbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcblxuICAgIGNvbnN0IHdpZHRoID0gYm9hcmQud2lkdGgoKTtcbiAgICBjb25zdCBoZWlnaHQgPSBib2FyZC5oZWlnaHQoKTtcbiAgICBjb25zdCBjZWxsV2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aCAvIHdpZHRoO1xuICAgIGNvbnN0IGNlbGxIZWlnaHQgPSB0aGlzLmNhbnZhcy5oZWlnaHQgLyBoZWlnaHQ7XG4gICAgY29uc3QgY2VsbFNpemUgPSBjZWxsV2lkdGggPiBjZWxsSGVpZ2h0ID8gY2VsbEhlaWdodCA6IGNlbGxXaWR0aDtcblxuICAgIGNvbnN0IGNvbG9ycyA9IG5ldyBNYXA8bnVtYmVyLCBzdHJpbmc+KCk7XG4gICAgY29uc3QgbGVnZW5kcyA9IG5ldyBNYXA8bnVtYmVyLCBMZWdlbmQ+KCk7XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG4gICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBib2FyZC5hdCh4LCB5KTtcbiAgICAgICAgY29uc3Qga2luZCA9IGNlbGwua2luZDtcbiAgICAgICAgbGV0IGNvbG9yID0gY29sb3JzLmdldChraW5kKTtcbiAgICAgICAgaWYgKGNvbG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb2xvciA9IGNlbGwuY29sb3JfY29kZSgpO1xuICAgICAgICAgIGlmIChjb2xvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb2xvcnMuc2V0KGtpbmQsIGNvbG9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gY29sb3IhO1xuICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCh4ICogY2VsbFNpemUsIHkgKiBjZWxsU2l6ZSwgY2VsbFNpemUsIGNlbGxTaXplKTtcbiAgICAgICAgaWYgKCFsZWdlbmRzLmhhcyhraW5kKSkge1xuICAgICAgICAgIGNvbnN0IHRleHQgPSBjZWxsLmxlZ2VuZCgpO1xuICAgICAgICAgIGxlZ2VuZHMuc2V0KGtpbmQsIHsgdGV4dCwgY29sb3IgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmN0eC5zdHJva2UoKTtcblxuICAgIHJldHVybiB7IGxlZ2VuZHMgfTtcbiAgfVxufVxuIiwiaW1wb3J0IHtcbiAgUG9pbnQzRCxcbiAgUG9pbnQsXG4gIEN1YmVEaW1lbnNpb24sXG4gIEN1YmVDb2xvcixcbiAgQ3ViZSxcbiAgUGl4ZWxWaWV3LFxufSBmcm9tIFwib2JlbGlzay5qc1wiO1xuaW1wb3J0IHsgTGFuZEtpbmQsIEJvYXJkLCBDZWxsIH0gZnJvbSBcIm1hcGdlblwiO1xuaW1wb3J0IHsgUmVuZGVyZXIsIFJlbmRlcmVkLCBMZWdlbmQgfSBmcm9tIFwiLi9yZW5kZXJlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJlcjNEIGltcGxlbWVudHMgUmVuZGVyZXIge1xuICBwcml2YXRlIGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgIHRoaXMuY2FudmFzID0gY2FudmFzO1xuICB9XG5cbiAgcHVibGljIHJlbmRlcihib2FyZDogQm9hcmQpOiBSZW5kZXJlZCB7XG4gICAgY29uc3QgZHByID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTtcbiAgICBjb25zdCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgdGhpcy5jYW52YXMud2lkdGggPSByZWN0LndpZHRoICogZHByO1xuICAgIHRoaXMuY2FudmFzLmhlaWdodCA9IHJlY3QuaGVpZ2h0ICogZHByO1xuXG4gICAgY29uc3Qgd2lkdGggPSBib2FyZC53aWR0aCgpO1xuICAgIGNvbnN0IGhlaWdodCA9IGJvYXJkLmhlaWdodCgpO1xuICAgIGNvbnN0IGNlbGxTaXplID0gdGhpcy5kZXRlcm1pbmVDZWxsU2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgIGNvbnN0IHBvaW50ID0gbmV3IFBvaW50KHRoaXMuY2FudmFzLndpZHRoIC8gMiwgY2VsbFNpemUgKyA5OSAqIDIpO1xuICAgIGNvbnN0IHBpeGVsVmlldyA9IG5ldyBQaXhlbFZpZXcodGhpcy5jYW52YXMsIHBvaW50KTtcblxuICAgIGNvbnN0IGNhY2hlID0gbmV3IE1hcDxudW1iZXIsIEN1YmU+KCk7IC8vIEFsdGl0dWRlIC0+IEN1YmVcbiAgICBjb25zdCBjb2xvcnMgPSBuZXcgTWFwPG51bWJlciwgQ3ViZUNvbG9yPigpOyAvLyBraW5kIC0+IEN1YmVDb2xvclxuICAgIGNvbnN0IGxlZ2VuZHMgPSBuZXcgTWFwPG51bWJlciwgTGVnZW5kPigpOyAvLyBraW5kIC0+IExlZ2VuZFxuICAgIGxldCB0b3BDdWJlOiBDdWJlIHwgbnVsbCA9IG51bGw7XG5cbiAgICBmdW5jdGlvbiBraW5kQ29sb3Ioa2luZDogTGFuZEtpbmQsIGNlbGw6IENlbGwpOiBDdWJlQ29sb3Ige1xuICAgICAgY29uc3QgY2FjaGVkID0gY29sb3JzLmdldChraW5kKTtcbiAgICAgIGlmIChjYWNoZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgfVxuICAgICAgbGV0IHJnYiA9IGNlbGwucmdiX2NvbG9yKCk7XG4gICAgICBpZiAocmdiID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmdiID0gMHhmZmZmZmY7XG4gICAgICB9XG4gICAgICBjb25zdCBjb2xvciA9IG5ldyBDdWJlQ29sb3IoKS5nZXRCeUhvcml6b250YWxDb2xvcihyZ2IpO1xuICAgICAgY29sb3JzLnNldChraW5kLCBjb2xvcik7XG5cbiAgICAgIC8vIFJlbWVtYmVyIGxlZ2VuZCBvZiB0aGUga2luZCBhbHNvXG4gICAgICBsZWdlbmRzLnNldChraW5kLCB7IHRleHQ6IGNlbGwubGVnZW5kKCksIGNvbG9yOiBjZWxsLmNvbG9yX2NvZGUoKSB9KTtcblxuICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhbGNDdWJlKGtpbmQ6IExhbmRLaW5kLCBhbHQ6IG51bWJlciwgY2VsbDogQ2VsbCk6IEN1YmUge1xuICAgICAgY29uc3QgY29sb3IgPSBraW5kQ29sb3Ioa2luZCwgY2VsbCk7XG4gICAgICBjb25zdCB6ID0gY2VsbFNpemUgKyBhbHQgKiAyO1xuICAgICAgY29uc3QgZGltID0gbmV3IEN1YmVEaW1lbnNpb24oY2VsbFNpemUsIGNlbGxTaXplLCB6KTtcbiAgICAgIHJldHVybiBuZXcgQ3ViZShkaW0sIGNvbG9yLCAvKmJvcmRlcjoqLyBmYWxzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3ViZUF0KGNlbGw6IENlbGwpOiBDdWJlIHtcbiAgICAgIGNvbnN0IGtpbmQgPSBjZWxsLmtpbmQ7XG4gICAgICBjb25zdCBhbHQgPSBjZWxsLmFsdGl0dWRlO1xuXG4gICAgICBpZiAoIWxlZ2VuZHMuaGFzKGtpbmQpKSB7XG4gICAgICAgIC8vIFJlbWVtYmVyIGxlZ2VuZCBvZiB0aGUga2luZCBhbHNvXG4gICAgICAgIGxlZ2VuZHMuc2V0KGtpbmQsIHsgdGV4dDogY2VsbC5sZWdlbmQoKSwgY29sb3I6IGNlbGwuY29sb3JfY29kZSgpIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoa2luZCA9PT0gTGFuZEtpbmQuVG9wKSB7XG4gICAgICAgIGlmICh0b3BDdWJlID09PSBudWxsKSB7XG4gICAgICAgICAgdG9wQ3ViZSA9IGNhbGNDdWJlKGtpbmQsIGFsdCwgY2VsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRvcEN1YmU7XG4gICAgICB9XG5cbiAgICAgIGlmIChraW5kID09PSBMYW5kS2luZC5Ub3duIHx8IGtpbmQgPT09IExhbmRLaW5kLlBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGNDdWJlKGtpbmQsIGFsdCwgY2VsbCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNhY2hlZCA9IGNhY2hlLmdldChhbHQpO1xuICAgICAgaWYgKGNhY2hlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGN1YmUgPSBjYWxjQ3ViZShraW5kLCBhbHQsIGNlbGwpO1xuICAgICAgY2FjaGUuc2V0KGFsdCwgY3ViZSk7XG4gICAgICByZXR1cm4gY3ViZTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IHdpZHRoOyB4KyspIHtcbiAgICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHtcbiAgICAgICAgY29uc3QgY3ViZSA9IGN1YmVBdChib2FyZC5hdCh4LCB5KSk7XG4gICAgICAgIGNvbnN0IHB0ID0gbmV3IFBvaW50M0QoeCAqIGNlbGxTaXplLCB5ICogY2VsbFNpemUsIDApO1xuICAgICAgICBwaXhlbFZpZXcucmVuZGVyT2JqZWN0KGN1YmUsIHB0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGVnZW5kcyxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBkZXRlcm1pbmVDZWxsU2l6ZSh3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIGNvbnN0IGJvdGggPSBoZWlnaHQgKyB3aWR0aDtcbiAgICBjb25zdCBmcm9tSGVpZ2h0ID0gKCh0aGlzLmNhbnZhcy5oZWlnaHQgLSAyMDApIC8gYm90aCkgKiAyO1xuICAgIGNvbnN0IGZyb21XaWR0aCA9ICgodGhpcy5jYW52YXMud2lkdGggLyBib3RoKSAqIDIpIC8gTWF0aC5zcXJ0KDMpO1xuICAgIGxldCBjZWxsU2l6ZSA9IE1hdGguZmxvb3IoZnJvbUhlaWdodCA+IGZyb21XaWR0aCA/IGZyb21XaWR0aCA6IGZyb21IZWlnaHQpO1xuICAgIGlmIChjZWxsU2l6ZSAlIDIgPT09IDEpIHtcbiAgICAgIGNlbGxTaXplLS07XG4gICAgfVxuICAgIHJldHVybiBjZWxsU2l6ZSA+IDYgPyBjZWxsU2l6ZSA6IDY7XG4gIH1cbn1cbiIsImltcG9ydCB7IEdlbmVyYXRvciwgQm9hcmQgfSBmcm9tIFwibWFwZ2VuXCI7XG5pbXBvcnQgeyBzYXZlQXMgfSBmcm9tIFwiZmlsZS1zYXZlclwiO1xuaW1wb3J0IFJlbmRlcmVyMkQgZnJvbSBcIi4vMmRcIjtcbmltcG9ydCBSZW5kZXJlcjNEIGZyb20gXCIuLzNkXCI7XG5pbXBvcnQgeyBSZW5kZXJlciB9IGZyb20gXCIuL3JlbmRlcmVyXCI7XG5cbmNvbnN0IGFwcCA9IG5ldyAoY2xhc3Mge1xuICBwcml2YXRlIGdlbmVyYXRvcjogR2VuZXJhdG9yO1xuICBwcml2YXRlIGRpbTogc3RyaW5nO1xuICBwcml2YXRlIGN1cnJlbnRCb2FyZDogQm9hcmQgfCBudWxsO1xuICBwcml2YXRlIHdpZHRoSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHByaXZhdGUgaGVpZ2h0SW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHByaXZhdGUgc2NyZWVuUm9vdDogSFRNTEVsZW1lbnQ7XG4gIHByaXZhdGUgcGFpbnRCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIGxlZ2VuZHM6IEhUTUxFbGVtZW50O1xuICBwcml2YXRlIHJlbmRlcmVyOiBSZW5kZXJlcjtcbiAgcHJpdmF0ZSBkb3dubG9hZEpTT05CdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xuICBwcml2YXRlIGRvd25sb2FkUE5HQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgcHJpdmF0ZSBzY3JlZW46IEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmdlbmVyYXRvciA9IEdlbmVyYXRvci5uZXcoKTtcbiAgICB0aGlzLmN1cnJlbnRCb2FyZCA9IG51bGw7XG4gICAgdGhpcy5zY3JlZW4gPSBudWxsO1xuXG4gICAgY29uc3Qgc2VsZWN0b3IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgIFwiZGltZW5zaW9uLXNlbGVjdG9yXCJcbiAgICApIGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdG9yW3NlbGVjdG9yLnNlbGVjdGVkSW5kZXhdIGFzIEhUTUxPcHRpb25FbGVtZW50O1xuICAgIHRoaXMuZGltID0gb3B0aW9uLnZhbHVlO1xuICAgIHNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcy5vblZpc3VhbGl6YXRpb25DaGFuZ2UuYmluZCh0aGlzKSk7XG5cbiAgICB0aGlzLndpZHRoSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgIFwid2lkdGgtaW5wdXRcIlxuICAgICkgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICB0aGlzLmhlaWdodElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICBcImhlaWdodC1pbnB1dFwiXG4gICAgKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHRoaXMuc2NyZWVuUm9vdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NyZWVuLXJvb3RcIikgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICB0aGlzLmluaXRSZW5kZXJlcigpO1xuXG4gICAgdGhpcy5wYWludEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgXCJwYWludC1idXR0b25cIlxuICAgICkgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgdGhpcy5wYWludEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICB9KTtcblxuICAgIHRoaXMubGVnZW5kcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGVnZW5kc1wiKSBhcyBIVE1MRWxlbWVudDtcblxuICAgIHRoaXMuZG93bmxvYWRKU09OQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXG4gICAgICBcImRvd25sb2FkLWpzb24tYnV0dG9uXCJcbiAgICApIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHRoaXMuZG93bmxvYWRKU09OQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICBcImNsaWNrXCIsXG4gICAgICB0aGlzLm9uRG93bmxvYWRKU09OLmJpbmQodGhpcylcbiAgICApO1xuXG4gICAgdGhpcy5kb3dubG9hZFBOR0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxuICAgICAgXCJkb3dubG9hZC1wbmctYnV0dG9uXCJcbiAgICApIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgIHRoaXMuZG93bmxvYWRQTkdCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIFwiY2xpY2tcIixcbiAgICAgIHRoaXMub25Eb3dubG9hZFBORy5iaW5kKHRoaXMpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSB7XG4gICAgLy8gVE9ETzogTG9hZGluZyBpbmRpY2F0b3IgY2Fubm90IGJlIGRpc3BsYXllZCBzaW5jZSBtYXAgZ2VuZXJhdGlvbiBpcyBydW4gaW4gbWFpbiB0aHJlYWQuXG4gICAgLy8gV2hlbiBtYXAgc2l6ZSBpcyB2ZXJ5IGxhcmdlIGFuZCBpdCBjb25zdW1lcyB0aW1lLCBDUFUgY29yZSBpcyBhbHNvIGNvbnN1bWVkIGZvciBtYWluIHRocmVhZC5cbiAgICAvLyBJbiB0aGUgY2FzZSwgbm8gYW5pbWF0aW9uIGlzIGFjdHVhbGx5IHJlbmRlcmVkLlxuICAgIC8vIFRvIHByZXZlbnQgdGhpcywgbWFwIGdlbmVyYXRpb24gbXVzdCBiZSBydW4gaW4gYW5vdGhlciB0aHJlYWQgYW5kIFJ1c3QgY2FuIGRvIGl0LlxuXG4gICAgLy8gdGhpcy5wYWludEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdpcy1sb2FkaW5nJyk7XG4gICAgdGhpcy5wYWludEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiUGFpbnRpbmcuLi5cIjtcbiAgICBmb3IgKGNvbnN0IGJ0biBvZiBbXG4gICAgICB0aGlzLnBhaW50QnV0dG9uLFxuICAgICAgdGhpcy5kb3dubG9hZEpTT05CdXR0b24sXG4gICAgICB0aGlzLmRvd25sb2FkUE5HQnV0dG9uLFxuICAgIF0pIHtcbiAgICAgIGJ0bi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuXG4gICAgLy8gV2FpdCBuZXh0IHRpY2sgdG8gY2hhbmdlIHRleHRcbiAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCBbd2lkdGgsIGhlaWdodF0gPSB0aGlzLmdldFNpemUoKTtcbiAgICAgIGNvbnN0IGJvYXJkID0gdGhpcy5nZW5lcmF0b3IuZ2VuX2F1dG8od2lkdGgsIGhlaWdodCk7XG4gICAgICBjb25zdCByZW5kZXJlZCA9IHRoaXMucmVuZGVyZXIucmVuZGVyKGJvYXJkKTtcblxuICAgICAgdGhpcy5sZWdlbmRzLmlubmVySFRNTCA9IFwiXCI7XG4gICAgICBjb25zdCBuYW1lcyA9IEFycmF5LmZyb20ocmVuZGVyZWQubGVnZW5kcy5rZXlzKCkpO1xuICAgICAgbmFtZXMuc29ydCgpO1xuICAgICAgZm9yIChjb25zdCBuYW1lIG9mIG5hbWVzKSB7XG4gICAgICAgIGNvbnN0IGxlZ2VuZCA9IHJlbmRlcmVkLmxlZ2VuZHMuZ2V0KG5hbWUpITtcbiAgICAgICAgY29uc3QgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGl0ZW0uY2xhc3NOYW1lID0gXCJsZWdlbmRcIjtcblxuICAgICAgICBjb25zdCBjb2xvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgIGNvbG9yLmNsYXNzTmFtZSA9IFwibGVnZW5kLWNvbG9yXCI7XG4gICAgICAgIGNvbG9yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGxlZ2VuZC5jb2xvciB8fCBcIm5vbmVcIjtcbiAgICAgICAgaXRlbS5hcHBlbmRDaGlsZChjb2xvcik7XG5cbiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSBcImxlZ2VuZC1uYW1lXCI7XG4gICAgICAgIGxhYmVsLnRleHRDb250ZW50ID0gbGVnZW5kLnRleHQ7XG4gICAgICAgIGl0ZW0uYXBwZW5kQ2hpbGQobGFiZWwpO1xuXG4gICAgICAgIHRoaXMubGVnZW5kcy5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY3VycmVudEJvYXJkID0gYm9hcmQ7XG5cbiAgICAgIC8vIHRoaXMucGFpbnRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaXMtbG9hZGluZycpO1xuICAgICAgZm9yIChjb25zdCBidG4gb2YgW1xuICAgICAgICB0aGlzLnBhaW50QnV0dG9uLFxuICAgICAgICB0aGlzLmRvd25sb2FkSlNPTkJ1dHRvbixcbiAgICAgICAgdGhpcy5kb3dubG9hZFBOR0J1dHRvbixcbiAgICAgIF0pIHtcbiAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoXCJkaXNhYmxlZFwiKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGFpbnRCdXR0b24udGV4dENvbnRlbnQgPSBcIkdlbmVyYXRlXCI7XG4gICAgICBjb25zb2xlLmxvZyhcIkNvbnN1bWVkOlwiLCBEYXRlLm5vdygpIC0gc3RhcnQpO1xuICAgIH0sIDApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRTaXplKCkge1xuICAgIGNvbnN0IHdpZHRoID0gcGFyc2VJbnQodGhpcy53aWR0aElucHV0LnZhbHVlLCAxMCk7XG4gICAgY29uc3QgaGVpZ2h0ID0gcGFyc2VJbnQodGhpcy5oZWlnaHRJbnB1dC52YWx1ZSwgMTApO1xuICAgIGlmICghaXNOYU4od2lkdGgpICYmICFpc05hTihoZWlnaHQpKSB7XG4gICAgICByZXR1cm4gW3dpZHRoLCBoZWlnaHRdO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRpbSA9PT0gXCIzZFwiKSB7XG4gICAgICByZXR1cm4gWzEyMCwgMTIwXTtcbiAgICB9XG5cbiAgICBjb25zdCByZWN0ID0gdGhpcy5zY3JlZW5Sb290LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgaWYgKCFpc05hTih3aWR0aCkpIHtcbiAgICAgIC8vIE5vdGU6IGhlaWdodCBpcyBOYU5cbiAgICAgIGNvbnN0IGNlbGxQaXggPSByZWN0LndpZHRoIC8gd2lkdGg7XG4gICAgICByZXR1cm4gW3dpZHRoLCBNYXRoLmZsb29yKHJlY3QuaGVpZ2h0IC8gY2VsbFBpeCldO1xuICAgIH0gZWxzZSBpZiAoIWlzTmFOKGhlaWdodCkpIHtcbiAgICAgIC8vIE5vdGU6IHdpZHRoIGlzIE5hTlxuICAgICAgY29uc3QgY2VsbFBpeCA9IHJlY3QuaGVpZ2h0IC8gaGVpZ2h0O1xuICAgICAgcmV0dXJuIFtNYXRoLmZsb29yKHJlY3Qud2lkdGggLyBjZWxsUGl4KSwgaGVpZ2h0XTtcbiAgICB9IC8qIGxvbmdlciBzaWRlIGxlbmd0aCBpcyAyMDAgY2VsbHMgYnkgZGVmYXVsdCAqLyBlbHNlIHtcbiAgICAgIGNvbnN0IG1heCA9IHJlY3QuaGVpZ2h0ID4gcmVjdC53aWR0aCA/IHJlY3QuaGVpZ2h0IDogcmVjdC53aWR0aDtcbiAgICAgIGNvbnN0IGNlbGxQaXggPSBtYXggLyAyMDA7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBNYXRoLmZsb29yKHJlY3Qud2lkdGggLyBjZWxsUGl4KSxcbiAgICAgICAgTWF0aC5mbG9vcihyZWN0LmhlaWdodCAvIGNlbGxQaXgpLFxuICAgICAgXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGluaXRSZW5kZXJlcigpIHtcbiAgICBjb25zdCBwcmV2ID0gdGhpcy5zY3JlZW5Sb290LmZpcnN0Q2hpbGQ7XG4gICAgaWYgKHByZXYgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuc2NyZWVuUm9vdC5yZW1vdmVDaGlsZChwcmV2KTtcbiAgICB9XG4gICAgdGhpcy5jdXJyZW50Qm9hcmQgPSBudWxsO1xuICAgIHRoaXMuc2NyZWVuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbiAgICB0aGlzLnNjcmVlbi5jbGFzc05hbWUgPSBcInNjcmVlblwiO1xuICAgIHRoaXMuc2NyZWVuUm9vdC5hcHBlbmRDaGlsZCh0aGlzLnNjcmVlbik7XG5cbiAgICBzd2l0Y2ggKHRoaXMuZGltKSB7XG4gICAgICBjYXNlIFwiMmRcIjpcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcjJEKHRoaXMuc2NyZWVuKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiM2RcIjpcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IG5ldyBSZW5kZXJlcjNEKHRoaXMuc2NyZWVuKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gY29udGV4dCAke3RoaXMuZGltfWApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgb25Eb3dubG9hZEpTT04oXzogRXZlbnQpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50Qm9hcmQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt0aGlzLmN1cnJlbnRCb2FyZC5hc19qc29uKCkhXSwge1xuICAgICAgdHlwZTogXCJ0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLThcIixcbiAgICB9KTtcbiAgICBzYXZlQXMoYmxvYiwgXCJib2FyZC5qc29uXCIpO1xuICB9XG5cbiAgcHJpdmF0ZSBvbkRvd25sb2FkUE5HKF86IEV2ZW50KSB7XG4gICAgaWYgKHRoaXMuc2NyZWVuID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuc2NyZWVuLnRvQmxvYigoYjogQmxvYikgPT4gc2F2ZUFzKGIsIFwiYm9hcmQucG5nXCIpKTtcbiAgfVxuXG4gIHByaXZhdGUgb25WaXN1YWxpemF0aW9uQ2hhbmdlKGV2ZW50OiBFdmVudCkge1xuICAgIGNvbnN0IHNlbGVjdG9yID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50O1xuICAgIGNvbnN0IG9wdGlvbiA9IHNlbGVjdG9yW3NlbGVjdG9yLnNlbGVjdGVkSW5kZXhdIGFzIEhUTUxPcHRpb25FbGVtZW50O1xuICAgIGNvbnN0IGRpbSA9IG9wdGlvbi52YWx1ZTtcbiAgICBpZiAodGhpcy5kaW0gPT09IGRpbSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmRpbSA9IGRpbTtcbiAgICB0aGlzLmluaXRSZW5kZXJlcigpO1xuICAgIHRoaXMucmVuZGVyKCk7XG4gIH1cbn0pKCk7XG5cbmFwcC5yZW5kZXIoKTtcbiIsImZ1bmN0aW9uIHdlYnBhY2tFbXB0eUNvbnRleHQocmVxKSB7XG5cdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHR0aHJvdyBlO1xufVxud2VicGFja0VtcHR5Q29udGV4dC5rZXlzID0gZnVuY3Rpb24oKSB7IHJldHVybiBbXTsgfTtcbndlYnBhY2tFbXB0eUNvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7XG5tb2R1bGUuZXhwb3J0cyA9IHdlYnBhY2tFbXB0eUNvbnRleHQ7XG53ZWJwYWNrRW1wdHlDb250ZXh0LmlkID0gNDg7IiwiaW1wb3J0ICogYXMgd2FzbSBmcm9tICcuL21hcGdlbl9iZy53YXNtJztcblxuY29uc3QgaGVhcCA9IG5ldyBBcnJheSgzMikuZmlsbCh1bmRlZmluZWQpO1xuXG5oZWFwLnB1c2godW5kZWZpbmVkLCBudWxsLCB0cnVlLCBmYWxzZSk7XG5cbmZ1bmN0aW9uIGdldE9iamVjdChpZHgpIHsgcmV0dXJuIGhlYXBbaWR4XTsgfVxuXG5sZXQgaGVhcF9uZXh0ID0gaGVhcC5sZW5ndGg7XG5cbmZ1bmN0aW9uIGRyb3BPYmplY3QoaWR4KSB7XG4gICAgaWYgKGlkeCA8IDM2KSByZXR1cm47XG4gICAgaGVhcFtpZHhdID0gaGVhcF9uZXh0O1xuICAgIGhlYXBfbmV4dCA9IGlkeDtcbn1cblxuZnVuY3Rpb24gdGFrZU9iamVjdChpZHgpIHtcbiAgICBjb25zdCByZXQgPSBnZXRPYmplY3QoaWR4KTtcbiAgICBkcm9wT2JqZWN0KGlkeCk7XG4gICAgcmV0dXJuIHJldDtcbn1cblxuY29uc3QgbFRleHREZWNvZGVyID0gdHlwZW9mIFRleHREZWNvZGVyID09PSAndW5kZWZpbmVkJyA/ICgwLCBtb2R1bGUucmVxdWlyZSkoJ3V0aWwnKS5UZXh0RGVjb2RlciA6IFRleHREZWNvZGVyO1xuXG5sZXQgY2FjaGVkVGV4dERlY29kZXIgPSBuZXcgbFRleHREZWNvZGVyKCd1dGYtOCcsIHsgaWdub3JlQk9NOiB0cnVlLCBmYXRhbDogdHJ1ZSB9KTtcblxuY2FjaGVkVGV4dERlY29kZXIuZGVjb2RlKCk7XG5cbmxldCBjYWNoZWRVaW50OE1lbW9yeTA7XG5mdW5jdGlvbiBnZXRVaW50OE1lbW9yeTAoKSB7XG4gICAgaWYgKGNhY2hlZFVpbnQ4TWVtb3J5MC5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNhY2hlZFVpbnQ4TWVtb3J5MCA9IG5ldyBVaW50OEFycmF5KHdhc20ubWVtb3J5LmJ1ZmZlcik7XG4gICAgfVxuICAgIHJldHVybiBjYWNoZWRVaW50OE1lbW9yeTA7XG59XG5cbmZ1bmN0aW9uIGdldFN0cmluZ0Zyb21XYXNtMChwdHIsIGxlbikge1xuICAgIHJldHVybiBjYWNoZWRUZXh0RGVjb2Rlci5kZWNvZGUoZ2V0VWludDhNZW1vcnkwKCkuc3ViYXJyYXkocHRyLCBwdHIgKyBsZW4pKTtcbn1cblxubGV0IGNhY2hlZEludDMyTWVtb3J5MDtcbmZ1bmN0aW9uIGdldEludDMyTWVtb3J5MCgpIHtcbiAgICBpZiAoY2FjaGVkSW50MzJNZW1vcnkwLmJ5dGVMZW5ndGggPT09IDApIHtcbiAgICAgICAgY2FjaGVkSW50MzJNZW1vcnkwID0gbmV3IEludDMyQXJyYXkod2FzbS5tZW1vcnkuYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIGNhY2hlZEludDMyTWVtb3J5MDtcbn1cblxuZnVuY3Rpb24gYWRkSGVhcE9iamVjdChvYmopIHtcbiAgICBpZiAoaGVhcF9uZXh0ID09PSBoZWFwLmxlbmd0aCkgaGVhcC5wdXNoKGhlYXAubGVuZ3RoICsgMSk7XG4gICAgY29uc3QgaWR4ID0gaGVhcF9uZXh0O1xuICAgIGhlYXBfbmV4dCA9IGhlYXBbaWR4XTtcblxuICAgIGhlYXBbaWR4XSA9IG9iajtcbiAgICByZXR1cm4gaWR4O1xufVxuXG5mdW5jdGlvbiBnZXRBcnJheVU4RnJvbVdhc20wKHB0ciwgbGVuKSB7XG4gICAgcmV0dXJuIGdldFVpbnQ4TWVtb3J5MCgpLnN1YmFycmF5KHB0ciAvIDEsIHB0ciAvIDEgKyBsZW4pO1xufVxuLyoqXG4qIFJlc29sdXRpb24gb2YgdGhlIGJvYXJkLlxuKi9cbmV4cG9ydCBjb25zdCBSZXNvbHV0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4vKipcbiogTG93IHJlc29sdXRpb24uIFRoZXJlIGFyZSBsaW1pdGVkIGtpbmRzIG9mIGNlbGxzIGluIGdlbmVyYXRlZCBib2FyZC5cbiovXG5Mb3c6MCxcIjBcIjpcIkxvd1wiLFxuLyoqXG4qIE1pZGRsZSByZXNvbHV0aW9uLiBNb3VudGFpbnMgYXJlIGdlbmVyYXRlZCB3aXRoIHNsb3BlcyBhbmQgdG93bnMgYXJlIHB1dC5cbiovXG5NaWRkbGU6MSxcIjFcIjpcIk1pZGRsZVwiLFxuLyoqXG4qIEhpZ2ggcmVzb2x1dGlvbi4gTW9yZSBraW5kcyBzdWNoIGFzIERlYXBTZWEgYW5kIEhpZ2hsYW5kIGFyZSB1c2VkLiBBbmQgcGF0aHMgYmV0d2VlbiB0b3duc1xuKiBhcmUgZHJhd24uXG4qL1xuSGlnaDoyLFwiMlwiOlwiSGlnaFwiLCB9KTtcbi8qKlxuKiBSZXByZXNlbnRzIHRoZSBraW5kIG9mIGNlbGwuIGBwcmVzZXQoKWAgbWV0aG9kIHJldHVybnMgYSBwcmVzZXQgY2VsbCBjb25zdGFudHMgZm9yXG4qIHRoZSBraW5kLlxuKi9cbmV4cG9ydCBjb25zdCBMYW5kS2luZCA9IE9iamVjdC5mcmVlemUoeyBTZWE6MCxcIjBcIjpcIlNlYVwiLE1vdW50YWluOjEsXCIxXCI6XCJNb3VudGFpblwiLEZvcmVzdDoyLFwiMlwiOlwiRm9yZXN0XCIsUGxhaW46MyxcIjNcIjpcIlBsYWluXCIsVG93bjo0LFwiNFwiOlwiVG93blwiLFRvcDo1LFwiNVwiOlwiVG9wXCIsSGlnaGxhbmQ6NixcIjZcIjpcIkhpZ2hsYW5kXCIsRGVlcFNlYTo3LFwiN1wiOlwiRGVlcFNlYVwiLFBhdGg6OCxcIjhcIjpcIlBhdGhcIiwgfSk7XG4vKipcbiogUmVwcmVzZW50cyBvbmUgYm9hcmQgZ2VuZXJhdGVkIGJ5IHJhbmRvbSBtYXAgZ2VuZXJhdG9yLlxuKi9cbmV4cG9ydCBjbGFzcyBCb2FyZCB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKEJvYXJkLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX2JvYXJkX2ZyZWUocHRyKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBSZXR1cm5zIHdpZHRoIGFzIG51bWJlciBvZiBjZWxscyBpbiBudW1iZXJcbiAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgKi9cbiAgICB3aWR0aCgpIHtcbiAgICAgICAgY29uc3QgcmV0ID0gd2FzbS5ib2FyZF93aWR0aCh0aGlzLnB0cik7XG4gICAgICAgIHJldHVybiByZXQgPj4+IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICogUmV0dXJucyBoZWlnaHQgYXMgbnVtYmVyIG9mIGNlbGxzIGluIG51bWJlclxuICAgICogQHJldHVybnMge251bWJlcn1cbiAgICAqL1xuICAgIGhlaWdodCgpIHtcbiAgICAgICAgY29uc3QgcmV0ID0gd2FzbS5ib2FyZF9oZWlnaHQodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIFJldHVybnMgY2VsbCBhdCBwb3NpdGlvbiAoeCwgeSkuXG4gICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICAqIEByZXR1cm5zIHtDZWxsfVxuICAgICovXG4gICAgYXQoeCwgeSkge1xuICAgICAgICBjb25zdCByZXQgPSB3YXNtLmJvYXJkX2F0KHRoaXMucHRyLCB4LCB5KTtcbiAgICAgICAgcmV0dXJuIENlbGwuX193cmFwKHJldCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogUmV0dXJucyBhIGJvYXJkIGJ5IHNlcmlhbGl6aW5nIGFzIEpTT04uIE9uIGZhaWx1cmUsIGl0IHJldHVybnMgYE5vbmVgIChgdW5kZWZpbmVkYCBpblxuICAgICogSmF2YVNjcmlwdClcbiAgICAqIEByZXR1cm5zIHtzdHJpbmcgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBhc19qc29uKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0cHRyID0gd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKC0xNik7XG4gICAgICAgICAgICB3YXNtLmJvYXJkX2FzX2pzb24ocmV0cHRyLCB0aGlzLnB0cik7XG4gICAgICAgICAgICB2YXIgcjAgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMF07XG4gICAgICAgICAgICB2YXIgcjEgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgICAgICBsZXQgdjA7XG4gICAgICAgICAgICBpZiAocjAgIT09IDApIHtcbiAgICAgICAgICAgICAgICB2MCA9IGdldFN0cmluZ0Zyb21XYXNtMChyMCwgcjEpLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2ZyZWUocjAsIHIxICogMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdjA7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4qIFJlcHJlc2VudHMgb25lIGNlbGwgaW4gYm9hcmQuIEluIGNvbnRyYXN0IHRvIGBsYW5kOjpMYW5kYCwgaXQgb25seSBjb250YWlucyBpdHMgbGFuZCBraW5kIGFuZFxuKiBhbHRpdHVkZSBpbiBvcmRlciB0byByZWR1Y2UgdG90YWwgbWVtb3J5IHNpemUuXG4qL1xuZXhwb3J0IGNsYXNzIENlbGwge1xuXG4gICAgc3RhdGljIF9fd3JhcChwdHIpIHtcbiAgICAgICAgY29uc3Qgb2JqID0gT2JqZWN0LmNyZWF0ZShDZWxsLnByb3RvdHlwZSk7XG4gICAgICAgIG9iai5wdHIgPSBwdHI7XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBfX2Rlc3Ryb3lfaW50b19yYXcoKSB7XG4gICAgICAgIGNvbnN0IHB0ciA9IHRoaXMucHRyO1xuICAgICAgICB0aGlzLnB0ciA9IDA7XG5cbiAgICAgICAgcmV0dXJuIHB0cjtcbiAgICB9XG5cbiAgICBmcmVlKCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLl9fZGVzdHJveV9pbnRvX3JhdygpO1xuICAgICAgICB3YXNtLl9fd2JnX2NlbGxfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEtpbmQgZm9yIHRoZSBjZWxsIChTZWEsIEZvcmVzdCwgTW91bnRhaW4sIC4uLilcbiAgICAqL1xuICAgIGdldCBraW5kKCkge1xuICAgICAgICBjb25zdCByZXQgPSB3YXNtLl9fd2JnX2dldF9jZWxsX2tpbmQodGhpcy5wdHIpO1xuICAgICAgICByZXR1cm4gcmV0ID4+PiAwO1xuICAgIH1cbiAgICAvKipcbiAgICAqIEtpbmQgZm9yIHRoZSBjZWxsIChTZWEsIEZvcmVzdCwgTW91bnRhaW4sIC4uLilcbiAgICAqL1xuICAgIHNldCBraW5kKGFyZzApIHtcbiAgICAgICAgd2FzbS5fX3diZ19zZXRfY2VsbF9raW5kKHRoaXMucHRyLCBhcmcwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBBbHRpdHVkZSBvZiB0aGUgY2VsbCBpbiAwLi45OVxuICAgICovXG4gICAgZ2V0IGFsdGl0dWRlKCkge1xuICAgICAgICBjb25zdCByZXQgPSB3YXNtLl9fd2JnX2dldF9jZWxsX2FsdGl0dWRlKHRoaXMucHRyKTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBBbHRpdHVkZSBvZiB0aGUgY2VsbCBpbiAwLi45OVxuICAgICovXG4gICAgc2V0IGFsdGl0dWRlKGFyZzApIHtcbiAgICAgICAgd2FzbS5fX3diZ19zZXRfY2VsbF9hbHRpdHVkZSh0aGlzLnB0ciwgYXJnMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICogUmV0dXJucyBjb2xvciBjb2RlIG9mIGxhbmQgYXMgYCNycmdnYmJgIGZvcm1hdCBzdHJpbmcgZnJvbSBsYW5kIGtpbmQuXG4gICAgKiBXaGVuIG5vIGNvbG9yIGlzIHNldCwgcmV0dXJucyBgTm9uZWAuIEl0IG1lYW5zIGB1bmRlZmluZWRgIGluIEphdmFTY3JpcHQgc2lkZS5cbiAgICAqIEByZXR1cm5zIHtzdHJpbmcgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICBjb2xvcl9jb2RlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcmV0cHRyID0gd2FzbS5fX3diaW5kZ2VuX2FkZF90b19zdGFja19wb2ludGVyKC0xNik7XG4gICAgICAgICAgICB3YXNtLmNlbGxfY29sb3JfY29kZShyZXRwdHIsIHRoaXMucHRyKTtcbiAgICAgICAgICAgIHZhciByMCA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAwXTtcbiAgICAgICAgICAgIHZhciByMSA9IGdldEludDMyTWVtb3J5MCgpW3JldHB0ciAvIDQgKyAxXTtcbiAgICAgICAgICAgIGxldCB2MDtcbiAgICAgICAgICAgIGlmIChyMCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHYwID0gZ2V0U3RyaW5nRnJvbVdhc20wKHIwLCByMSkuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fZnJlZShyMCwgcjEgKiAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2MDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgKiBSZXR1cm5zIFJHQiBjb2xvciBhcyB1MzIuIDB+OCBiaXRzIGZvciBCLCA5fjE2IGJpdHMgZm9yIEcsIDE3fjI0IGJpdHMgZm9yIFIuXG4gICAgKiBXaGVuIG5vIGNvbG9yIGlzIHNldCwgcmV0dXJucyBgTm9uZWAuIEl0IG1lYW5zIGB1bmRlZmluZWRgIGluIEphdmFTY3JpcHQgc2lkZS5cbiAgICAqIEByZXR1cm5zIHtudW1iZXIgfCB1bmRlZmluZWR9XG4gICAgKi9cbiAgICByZ2JfY29sb3IoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgICAgIHdhc20uY2VsbF9yZ2JfY29sb3IocmV0cHRyLCB0aGlzLnB0cik7XG4gICAgICAgICAgICB2YXIgcjAgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMF07XG4gICAgICAgICAgICB2YXIgcjEgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgICAgICByZXR1cm4gcjAgPT09IDAgPyB1bmRlZmluZWQgOiByMSA+Pj4gMDtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHdhc20uX193YmluZGdlbl9hZGRfdG9fc3RhY2tfcG9pbnRlcigxNik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgKiBSZXR1cm5zIGxlZ2VuZCBvZiBsYW5kIGFzIHN0cmluZyBmcm9tIGxhbmQga2luZC5cbiAgICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAgKi9cbiAgICBsZWdlbmQoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXRwdHIgPSB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoLTE2KTtcbiAgICAgICAgICAgIHdhc20uY2VsbF9sZWdlbmQocmV0cHRyLCB0aGlzLnB0cik7XG4gICAgICAgICAgICB2YXIgcjAgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMF07XG4gICAgICAgICAgICB2YXIgcjEgPSBnZXRJbnQzMk1lbW9yeTAoKVtyZXRwdHIgLyA0ICsgMV07XG4gICAgICAgICAgICByZXR1cm4gZ2V0U3RyaW5nRnJvbVdhc20wKHIwLCByMSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB3YXNtLl9fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIoMTYpO1xuICAgICAgICAgICAgd2FzbS5fX3diaW5kZ2VuX2ZyZWUocjAsIHIxKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuKiBSZXByZXNlbnRzIHJhbmRvbSBtYXAgZ2VuZXJhdG9yLiBJbiBjb250cmFzdCB0byBgZ2VuOjpSYW5kb21Cb2FyZEdlbmAsIGl0IG9ubHkgcHJvdmlkZXMgbGltaXRlZFxuKiBmdW5jdGlvbmFsaXR5LiBJdCBjYW5ub3QgYmUgaW5pdGlhbGl6ZWQgd2l0aCBzcGVjaWZpYyBzZWVkLiBBbmQgbWFwIHJlc29sdXRpb24gaXMgYWx3YXlzIGRldGVjdGVkXG4qIGZyb20gaXRzIHNpemUuXG4qL1xuZXhwb3J0IGNsYXNzIEdlbmVyYXRvciB7XG5cbiAgICBzdGF0aWMgX193cmFwKHB0cikge1xuICAgICAgICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKEdlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgICAgICBvYmoucHRyID0gcHRyO1xuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuXG4gICAgX19kZXN0cm95X2ludG9fcmF3KCkge1xuICAgICAgICBjb25zdCBwdHIgPSB0aGlzLnB0cjtcbiAgICAgICAgdGhpcy5wdHIgPSAwO1xuXG4gICAgICAgIHJldHVybiBwdHI7XG4gICAgfVxuXG4gICAgZnJlZSgpIHtcbiAgICAgICAgY29uc3QgcHRyID0gdGhpcy5fX2Rlc3Ryb3lfaW50b19yYXcoKTtcbiAgICAgICAgd2FzbS5fX3diZ19nZW5lcmF0b3JfZnJlZShwdHIpO1xuICAgIH1cbiAgICAvKipcbiAgICAqIENyZWF0ZSBhIG5ldyBnZW5lcmF0b3IgaW5zdGFuY2UgaW5pdGlhbGl6ZWQgd2l0aCB0aHJlYWQtZGVmYXVsdCByYW5kb20gbnVtYmVyIGdlbmVyYXRvci5cbiAgICAqIE5vIHNlZWRhYmxlIFJORyBpcyBwcm92aWRlZCBmb3IgV2FzbSBpbnRlcmZhY2UgZm9yIG5vdy5cbiAgICAqIEByZXR1cm5zIHtHZW5lcmF0b3J9XG4gICAgKi9cbiAgICBzdGF0aWMgbmV3KCkge1xuICAgICAgICBjb25zdCByZXQgPSB3YXNtLmdlbmVyYXRvcl9uZXcoKTtcbiAgICAgICAgcmV0dXJuIEdlbmVyYXRvci5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBHZW5lcmF0ZXMgcmFuZG9tIG1hcCBib2FyZCB3aXRoIGdpdmVuIHdpZHRoIGFuZCBoZWlnaHQuIFBhcmFtZXRlcnMgYXJlIGluIG51bWJlciBvZiBjZWxscy5cbiAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgICogQHJldHVybnMge0JvYXJkfVxuICAgICovXG4gICAgZ2VuX2F1dG8od2lkdGgsIGhlaWdodCkge1xuICAgICAgICBjb25zdCByZXQgPSB3YXNtLmdlbmVyYXRvcl9nZW5fYXV0byh0aGlzLnB0ciwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHJldHVybiBCb2FyZC5fX3dyYXAocmV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgKiBHZW5lcmF0ZXMgcmFuZG9tIG1hcCBib2FyZCB3aXRoIGdpdmVuIHJlc29sdXRpb24sIHdpZHRoIGFuZCBoZWlnaHQuIFdpZHRoIGFuZCBoZWlnaHQgYXJlXG4gICAgKiBpbiBudW1iZXIgb2YgY2VsbHMuXG4gICAgKiBAcGFyYW0ge251bWJlcn0gcmVzXG4gICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICAqIEByZXR1cm5zIHtCb2FyZH1cbiAgICAqL1xuICAgIGdlbihyZXMsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgY29uc3QgcmV0ID0gd2FzbS5nZW5lcmF0b3JfZ2VuKHRoaXMucHRyLCByZXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICByZXR1cm4gQm9hcmQuX193cmFwKHJldCk7XG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gX193YmluZGdlbl9vYmplY3RfZHJvcF9yZWYoYXJnMCkge1xuICAgIHRha2VPYmplY3QoYXJnMCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfZ2V0UmFuZG9tVmFsdWVzXzFlZjExZTg4OGU1MjI4ZTkoYXJnMCwgYXJnMSwgYXJnMikge1xuICAgIGdldE9iamVjdChhcmcwKS5nZXRSYW5kb21WYWx1ZXMoZ2V0QXJyYXlVOEZyb21XYXNtMChhcmcxLCBhcmcyKSk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfcmFuZG9tRmlsbFN5bmNfMWI1MmM4NDgyMzc0YzU1YihhcmcwLCBhcmcxLCBhcmcyKSB7XG4gICAgZ2V0T2JqZWN0KGFyZzApLnJhbmRvbUZpbGxTeW5jKGdldEFycmF5VThGcm9tV2FzbTAoYXJnMSwgYXJnMikpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX25ld18zYTc0NmYyNjE5NzA1YWRkKGFyZzAsIGFyZzEpIHtcbiAgICBjb25zdCByZXQgPSBuZXcgRnVuY3Rpb24oZ2V0U3RyaW5nRnJvbVdhc20wKGFyZzAsIGFyZzEpKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX2NhbGxfZjU0ZDNhNmRhZGIxOTljYShhcmcwLCBhcmcxKSB7XG4gICAgY29uc3QgcmV0ID0gZ2V0T2JqZWN0KGFyZzApLmNhbGwoZ2V0T2JqZWN0KGFyZzEpKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5fanN2YWxfZXEoYXJnMCwgYXJnMSkge1xuICAgIGNvbnN0IHJldCA9IGdldE9iamVjdChhcmcwKSA9PT0gZ2V0T2JqZWN0KGFyZzEpO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193Ymdfc2VsZl9hYzM3OWU3ODBhMGQ4Yjk0KGFyZzApIHtcbiAgICBjb25zdCByZXQgPSBnZXRPYmplY3QoYXJnMCkuc2VsZjtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JnX2NyeXB0b18xZTQzMDJiODVkNGY2NGEyKGFyZzApIHtcbiAgICBjb25zdCByZXQgPSBnZXRPYmplY3QoYXJnMCkuY3J5cHRvO1xuICAgIHJldHVybiBhZGRIZWFwT2JqZWN0KHJldCk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmluZGdlbl9pc191bmRlZmluZWQoYXJnMCkge1xuICAgIGNvbnN0IHJldCA9IGdldE9iamVjdChhcmcwKSA9PT0gdW5kZWZpbmVkO1xuICAgIHJldHVybiByZXQ7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gX193YmdfZ2V0UmFuZG9tVmFsdWVzXzFiNGJhMTQ0MTYyYTVjOWUoYXJnMCkge1xuICAgIGNvbnN0IHJldCA9IGdldE9iamVjdChhcmcwKS5nZXRSYW5kb21WYWx1ZXM7XG4gICAgcmV0dXJuIGFkZEhlYXBPYmplY3QocmV0KTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBfX3diZ19yZXF1aXJlXzY0NjFiMWU5YTBkN2MzNGEoYXJnMCwgYXJnMSkge1xuICAgIGNvbnN0IHJldCA9IHJlcXVpcmUoZ2V0U3RyaW5nRnJvbVdhc20wKGFyZzAsIGFyZzEpKTtcbiAgICByZXR1cm4gYWRkSGVhcE9iamVjdChyZXQpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIF9fd2JpbmRnZW5fdGhyb3coYXJnMCwgYXJnMSkge1xuICAgIHRocm93IG5ldyBFcnJvcihnZXRTdHJpbmdGcm9tV2FzbTAoYXJnMCwgYXJnMSkpO1xufTtcblxuY2FjaGVkSW50MzJNZW1vcnkwID0gbmV3IEludDMyQXJyYXkod2FzbS5tZW1vcnkuYnVmZmVyKTtcbmNhY2hlZFVpbnQ4TWVtb3J5MCA9IG5ldyBVaW50OEFycmF5KHdhc20ubWVtb3J5LmJ1ZmZlcik7XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=